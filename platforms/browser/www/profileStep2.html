<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0 minimal-ui"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <!-- Path to matterTheme Library CSS-->
  <link href="lib/matterTheme/styles/style.css"           rel="stylesheet" type="text/css">
  <link href="lib/matterTheme/styles/framework.css"       rel="stylesheet" type="text/css">
  <link href="lib/matterTheme/styles/font-awesome.css"    rel="stylesheet" type="text/css">
  <link href="lib/matterTheme/styles/animate.css"         rel="stylesheet" type="text/css">

  <link rel="shortcut icon" href="lib/matterTheme/images/splash/favicon.ico" type="image/x-icon" />

  <!-- Path to matterTheme Library JS-->
  <script type="text/javascript" src="lib/matterTheme/scripts/jquery.js"></script>
  <script type="text/javascript" src="lib/matterTheme/scripts/jqueryui.js"></script>
  <script type="text/javascript" src="lib/matterTheme/scripts/framework-plugins.js"></script>
  <script type="text/javascript" src="lib/matterTheme/scripts/custom.js"></script>


  <!-- Path to countries JS-->
  <script type= "text/javascript" src = "js/countries.js"></script>

  <!-- Path to customize CSS-->
  <link rel="stylesheet" href="css/customize.css">
  <!-- Path to Angular JS -->
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
  <script type="text/javascript">
  function onLoad(){
    document.addEventListener("deviceready",onDeviceReady, true);
    document.addEventListener("backbutton", onBackKeyDown, false);
  }

  function onDeviceReady(){
    // navigator.notification.alert("PhoneGap is working!!");
    console.log('onready');
  }

  function onBackKeyDown(e) {
    console.log('back button pressed!');
    showConfirm();
  }

  // process the confirmation dialog result
  function onConfirm(button) {
    if (button == 2) {
      navigator.app.exitApp();
    }
  }

  // Show a custom confirmation dialog
  //
  function showConfirm() {
    navigator.notification.confirm(
      'Are you sure to exit?',  // message
      onConfirm,              // callback to invoke with index of button pressed
      'Alert',            // title
      'Cancel,Exit'          // buttonLabels
    );
  }


  </script>
  <title>Collecting information step 1</title>
</head>
<body onload="onLoad()">
  <div class="material-container full-bottom">
    <div class="sidebar-divider" style="padding-left: 0px">
      Let we know more about you (2/3)
    </div>
  <div class="contact-form no-bottom">
    <fieldset>
      <div class="formFieldWrap">
        <select class="contactField2" name="nationality" id="txtNationality">
          <option value="" disabled selected style="display: none;">Your nationality</option>
          <option value="afghan">Afghan</option>
          <option value="albanian">Albanian</option>
          <option value="algerian">Algerian</option>
          <option value="american">American</option>
          <option value="andorran">Andorran</option>
          <option value="angolan">Angolan</option>
          <option value="antiguans">Antiguans</option>
          <option value="argentinean">Argentinean</option>
          <option value="armenian">Armenian</option>
          <option value="australian">Australian</option>
          <option value="austrian">Austrian</option>
          <option value="azerbaijani">Azerbaijani</option>
          <option value="bahamian">Bahamian</option>
          <option value="bahraini">Bahraini</option>
          <option value="bangladeshi">Bangladeshi</option>
          <option value="barbadian">Barbadian</option>
          <option value="barbudans">Barbudans</option>
          <option value="batswana">Batswana</option>
          <option value="belarusian">Belarusian</option>
          <option value="belgian">Belgian</option>
          <option value="belizean">Belizean</option>
          <option value="beninese">Beninese</option>
          <option value="bhutanese">Bhutanese</option>
          <option value="bolivian">Bolivian</option>
          <option value="bosnian">Bosnian</option>
          <option value="brazilian">Brazilian</option>
          <option value="british">British</option>
          <option value="bruneian">Bruneian</option>
          <option value="bulgarian">Bulgarian</option>
          <option value="burkinabe">Burkinabe</option>
          <option value="burmese">Burmese</option>
          <option value="burundian">Burundian</option>
          <option value="cambodian">Cambodian</option>
          <option value="cameroonian">Cameroonian</option>
          <option value="canadian">Canadian</option>
          <option value="cape verdean">Cape Verdean</option>
          <option value="central african">Central African</option>
          <option value="chadian">Chadian</option>
          <option value="chilean">Chilean</option>
          <option value="chinese">Chinese</option>
          <option value="colombian">Colombian</option>
          <option value="comoran">Comoran</option>
          <option value="congolese">Congolese</option>
          <option value="costa rican">Costa Rican</option>
          <option value="croatian">Croatian</option>
          <option value="cuban">Cuban</option>
          <option value="cypriot">Cypriot</option>
          <option value="czech">Czech</option>
          <option value="danish">Danish</option>
          <option value="djibouti">Djibouti</option>
          <option value="dominican">Dominican</option>
          <option value="dutch">Dutch</option>
          <option value="east timorese">East Timorese</option>
          <option value="ecuadorean">Ecuadorean</option>
          <option value="egyptian">Egyptian</option>
          <option value="emirian">Emirian</option>
          <option value="equatorial guinean">Equatorial Guinean</option>
          <option value="eritrean">Eritrean</option>
          <option value="estonian">Estonian</option>
          <option value="ethiopian">Ethiopian</option>
          <option value="fijian">Fijian</option>
          <option value="filipino">Filipino</option>
          <option value="finnish">Finnish</option>
          <option value="french">French</option>
          <option value="gabonese">Gabonese</option>
          <option value="gambian">Gambian</option>
          <option value="georgian">Georgian</option>
          <option value="german">German</option>
          <option value="ghanaian">Ghanaian</option>
          <option value="greek">Greek</option>
          <option value="grenadian">Grenadian</option>
          <option value="guatemalan">Guatemalan</option>
          <option value="guinea-bissauan">Guinea-Bissauan</option>
          <option value="guinean">Guinean</option>
          <option value="guyanese">Guyanese</option>
          <option value="haitian">Haitian</option>
          <option value="herzegovinian">Herzegovinian</option>
          <option value="honduran">Honduran</option>
          <option value="hungarian">Hungarian</option>
          <option value="icelander">Icelander</option>
          <option value="indian">Indian</option>
          <option value="indonesian">Indonesian</option>
          <option value="iranian">Iranian</option>
          <option value="iraqi">Iraqi</option>
          <option value="irish">Irish</option>
          <option value="israeli">Israeli</option>
          <option value="italian">Italian</option>
          <option value="ivorian">Ivorian</option>
          <option value="jamaican">Jamaican</option>
          <option value="japanese">Japanese</option>
          <option value="jordanian">Jordanian</option>
          <option value="kazakhstani">Kazakhstani</option>
          <option value="kenyan">Kenyan</option>
          <option value="kittian and nevisian">Kittian and Nevisian</option>
          <option value="kuwaiti">Kuwaiti</option>
          <option value="kyrgyz">Kyrgyz</option>
          <option value="laotian">Laotian</option>
          <option value="latvian">Latvian</option>
          <option value="lebanese">Lebanese</option>
          <option value="liberian">Liberian</option>
          <option value="libyan">Libyan</option>
          <option value="liechtensteiner">Liechtensteiner</option>
          <option value="lithuanian">Lithuanian</option>
          <option value="luxembourger">Luxembourger</option>
          <option value="macedonian">Macedonian</option>
          <option value="malagasy">Malagasy</option>
          <option value="malawian">Malawian</option>
          <option value="malaysian">Malaysian</option>
          <option value="maldivan">Maldivan</option>
          <option value="malian">Malian</option>
          <option value="maltese">Maltese</option>
          <option value="marshallese">Marshallese</option>
          <option value="mauritanian">Mauritanian</option>
          <option value="mauritian">Mauritian</option>
          <option value="mexican">Mexican</option>
          <option value="micronesian">Micronesian</option>
          <option value="moldovan">Moldovan</option>
          <option value="monacan">Monacan</option>
          <option value="mongolian">Mongolian</option>
          <option value="moroccan">Moroccan</option>
          <option value="mosotho">Mosotho</option>
          <option value="motswana">Motswana</option>
          <option value="mozambican">Mozambican</option>
          <option value="namibian">Namibian</option>
          <option value="nauruan">Nauruan</option>
          <option value="nepalese">Nepalese</option>
          <option value="new zealander">New Zealander</option>
          <option value="ni-vanuatu">Ni-Vanuatu</option>
          <option value="nicaraguan">Nicaraguan</option>
          <option value="nigerien">Nigerien</option>
          <option value="north korean">North Korean</option>
          <option value="northern irish">Northern Irish</option>
          <option value="norwegian">Norwegian</option>
          <option value="omani">Omani</option>
          <option value="pakistani">Pakistani</option>
          <option value="palauan">Palauan</option>
          <option value="panamanian">Panamanian</option>
          <option value="papua new guinean">Papua New Guinean</option>
          <option value="paraguayan">Paraguayan</option>
          <option value="peruvian">Peruvian</option>
          <option value="polish">Polish</option>
          <option value="portuguese">Portuguese</option>
          <option value="qatari">Qatari</option>
          <option value="romanian">Romanian</option>
          <option value="russian">Russian</option>
          <option value="rwandan">Rwandan</option>
          <option value="saint lucian">Saint Lucian</option>
          <option value="salvadoran">Salvadoran</option>
          <option value="samoan">Samoan</option>
          <option value="san marinese">San Marinese</option>
          <option value="sao tomean">Sao Tomean</option>
          <option value="saudi">Saudi</option>
          <option value="scottish">Scottish</option>
          <option value="senegalese">Senegalese</option>
          <option value="serbian">Serbian</option>
          <option value="seychellois">Seychellois</option>
          <option value="sierra leonean">Sierra Leonean</option>
          <option value="singaporean">Singaporean</option>
          <option value="slovakian">Slovakian</option>
          <option value="slovenian">Slovenian</option>
          <option value="solomon islander">Solomon Islander</option>
          <option value="somali">Somali</option>
          <option value="south african">South African</option>
          <option value="south korean">South Korean</option>
          <option value="spanish">Spanish</option>
          <option value="sri lankan">Sri Lankan</option>
          <option value="sudanese">Sudanese</option>
          <option value="surinamer">Surinamer</option>
          <option value="swazi">Swazi</option>
          <option value="swedish">Swedish</option>
          <option value="swiss">Swiss</option>
          <option value="syrian">Syrian</option>
          <option value="taiwanese">Taiwanese</option>
          <option value="tajik">Tajik</option>
          <option value="tanzanian">Tanzanian</option>
          <option value="thai">Thai</option>
          <option value="togolese">Togolese</option>
          <option value="tongan">Tongan</option>
          <option value="trinidadian or tobagonian">Trinidadian or Tobagonian</option>
          <option value="tunisian">Tunisian</option>
          <option value="turkish">Turkish</option>
          <option value="tuvaluan">Tuvaluan</option>
          <option value="ugandan">Ugandan</option>
          <option value="ukrainian">Ukrainian</option>
          <option value="uruguayan">Uruguayan</option>
          <option value="uzbekistani">Uzbekistani</option>
          <option value="venezuelan">Venezuelan</option>
          <option value="vietnamese">Vietnamese</option>
          <option value="welsh">Welsh</option>
          <option value="yemenite">Yemenite</option>
          <option value="zambian">Zambian</option>
          <option value="zimbabwean">Zimbabwean</option>
        </select>
      </div>
      <div class="formFieldWrap">
        <select class="contactField2" id="txtCountry" name ="country"></select>
      </div>
      <div class="formTextareaWrap">
        <select class="contactField2" name="state" id="txtState"></select>
      </div>
      <div class="formTextareaWrap">
        <!-- <input type="text" placeholder="Gender" name="contactNameField" value="" class="contactField requiredField" id="txtGender"/> -->
        <select class="contactField2" name="event-type" id="txtMotherTongue">
          <option value="" disabled selected style="display: none;">Your mother tongue</option>
          <option value="English">English</option>
          <option value="Spanish">Spanish</option>
          <option value="Arabic">Arabic</option>
          <option value="Bengali">Bengali</option>
          <option value="Hindi">Hindi</option>
          <option value="Russian">Russian</option>
          <option value="Portuguese">Portuguese</option>
          <option value="Japanese">Japanese</option>
          <option value="German">German</option>
          <option value="Chinese">Chinese</option>
          <option value="Javanese">Javanese</option>
          <option value="Korean">Korean</option>
          <option value="French">French</option>
          <option value="Turkish">Turkish</option>
          <option value="Vietnamese">Vietnamese</option>
          <option value="Telugu">Telugu</option>
          <option value="Chinese">Chinese</option>
          <option value="Marathi">Marathi</option>
          <option value="Tamil">Tamil</option>
          <option value="Italian">Italian</option>
          <option value="Urdu">Urdu</option>
          <option value="Gujarati">Gujarati</option>
          <option value="Polish">Polish</option>
          <option value="Ukrainian">Ukrainian</option>
          <option value="Persian">Persian</option>
          <option value="Malayalam">Malayalam</option>
          <option value="Kannada">Kannada</option>
          <option value="Oriya">Oriya</option>
          <option value="Panjabi">Panjabi</option>
          <option value="Sunda">Sunda</option>
          <option value="Panjabi">Panjabi</option>
          <option value="Romanian">Romanian</option>
          <option value="Bhojpuri">Bhojpuri</option>
          <option value="Azerbaijani">Azerbaijani</option>
          <option value="Maithili">Maithili</option>
          <option value="Hausa">Hausa</option>
          <option value="Burmese">Burmese</option>
          <option value="Serbo">Serbo</option>
          <option value="Awadhi">Awadhi</option>
          <option value="Thai">Thai</option>
          <option value="Dutch">Dutch</option>
          <option value="Yoruba">Yoruba</option>
          <option value="Sindhi">Sindhi</option>
          <option value="Other">Other</option>
        </select>
      </div>
      <div class="formSubmitButtonErrorsWrap contactFormButton">
        <input type="submit" onclick="nextButtonHandler()" class="buttonWrap button button-green contactSubmitButton" id="btnNext" value="Next"/>
      </div>
    </fieldset>
  </div>
</div>
<!-- All require -->
<div class="top-notification-2 top-notification bg-red-dark timeout-notification timer-notification" id="allRequire">
  <p>
    All fields are require!
  </p>
  <a href="#" class="close-top-notification"><i class="fa fa-times"></i></a>
</div>
<!-- Connection error -->
<div class="top-notification-2 top-notification bg-red-dark timeout-notification timer-notification" id="errorConnection">
  <p>
    Can't connect to server, please check your internet connection!
  </p>
  <a href="#" class="close-top-notification"><i class="fa fa-times"></i></a>
</div>
<!-- Other error -->
<div class="top-notification-2 top-notification bg-red-dark timeout-notification timer-notification" id="otherError">
  <p>
    An error has occurred when save your information. Please try again!
  </p>
  <a href="#" class="close-top-notification"><i class="fa fa-times"></i></a>
</div>

<script>
populateCountries("txtCountry", "txtState");

// handler next button
function nextButtonHandler(){
  disableAll();
  var userName = window.localStorage.getItem("username");
  console.log("next btn click");
  console.log(userName);
  // Check connectionStatus
  if (checkInternetConnection()) {
    // Check input data
    if (checkInput()) {
      console.log('all validated!');
      saveToServer();
    }else {
      showMessage("allRequire");
      enableAll();
    }
  }else {
    enableAll();
    showMessage("connectionError");
  }
};

function checkInput() {
  if ($("#txtNationality").val()==null || $("#txtCountry").val()==null || $("#txtState").val()=="" || $("#txtMotherTongue").val()==null || $("#txtState").val()==null) {
    return false;
  }else {
    return true;
  }
}

function saveToServer() {
  var userName = window.localStorage.getItem("username");
  var nationality = $("#txtNationality option:selected").val();
  var country  = $("#txtCountry option:selected").val();
  var citySate = $("#txtState option:selected").val();
  var motherTongue = $("#txtMotherTongue option:selected").val();
  var dataString="&userName="+userName+"&nationality="+nationality+"&country="+country+"&citystates="+citySate+"&mothertongue="+motherTongue+"&savestep2=";
  console.log(dataString);
  $.ajax({
    type: "POST",
    url:"http://139.59.254.92/saveinfo.php",
    data: dataString,
    crossDomain: true,
    cache: false,
    beforeSend: function(){ console.log('saving...');},
    success: function(data){
      console.log(data);
      // save success
      if (data=="saveSuccess") {
        enableAll();
        window.location.replace("profileStep3.html");
      }else if (data=="saveError") {
        // save error
        enableAll();
        showMessage('otherError');
      }
    }
  });
}

// disable all when processing
function disableAll() {
  $("#btnNext").attr("onclick","return false;");
}
// enable all when process done
function enableAll() {
  $("#btnNext").attr("onclick","nextButtonHandler()");
}

// check connection
function checkInternetConnection() {
  connectionStatus = navigator.onLine ? 'online' : 'offline';
  if (connectionStatus=='online') {
    return true;
  }else if (connectionStatus=='offline') {
    return false;
  }
}
// Show message
function showMessage(messType) {
  switch(messType) {
    case 'allRequire':
    $('top-notification-2, top-notification, bg-red-dark, timeout-notification, timer-notification').slideUp(200);
    $('#allRequire').slideDown(200);
    setTimeout(function(){
      $('#allRequire').slideUp(200);
    }, 4000);
    break;
    case 'connectionError':
    $('top-notification-2, top-notification, bg-red-dark, timeout-notification, timer-notification').slideUp(200);
    $('#errorConnection').slideDown(200);
    setTimeout(function(){
      $('#errorConnection').slideUp(200);
    }, 4000);
    break;
    case 'otherError':
    $('top-notification-2, top-notification, bg-red-dark, timeout-notification, timer-notification').slideUp(200);
    $('#otherError').slideDown(200);
    setTimeout(function(){
      $('#otherError').slideUp(200);
    }, 4000);
    break;
    default:
    return false;
  }
}
</script>

<!-- <script type="text/javascript" src="controller/loginController.js"></script> -->
<!-- Cordova reference -->
<script type="text/javascript" src="cordova.js"></script>
<!-- <script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
app.initialize();
</script>  -->
</body>
</html>

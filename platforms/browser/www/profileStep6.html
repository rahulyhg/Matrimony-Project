<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0 minimal-ui"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <!-- Path to matterTheme Library CSS-->
  <link href="lib/matterTheme/styles/style.css"           rel="stylesheet" type="text/css">
  <link href="lib/matterTheme/styles/framework.css"       rel="stylesheet" type="text/css">
  <link href="lib/matterTheme/styles/font-awesome.css"    rel="stylesheet" type="text/css">
  <link href="lib/matterTheme/styles/animate.css"         rel="stylesheet" type="text/css">

  <link rel="shortcut icon" href="lib/matterTheme/images/splash/favicon.ico" type="image/x-icon" />

  <!-- Path to matterTheme Library JS-->
  <script type="text/javascript" src="lib/matterTheme/scripts/jquery.js"></script>
  <script type="text/javascript" src="lib/matterTheme/scripts/jqueryui.js"></script>
  <script type="text/javascript" src="lib/matterTheme/scripts/framework-plugins.js"></script>
  <script type="text/javascript" src="lib/matterTheme/scripts/custom.js"></script>
  <!-- Path to customize CSS-->
  <link rel="stylesheet" href="css/customize.css">
  <!-- Path to Angular JS -->
  <!-- <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script> -->
  <script type="text/javascript">
  function onLoad(){
    document.addEventListener("deviceready",onDeviceReady, true);
    document.addEventListener("backbutton", onBackKeyDown, false);
  }

  function onDeviceReady(){
    // navigator.notification.alert("PhoneGap is working!!");
    console.log('onready');
  }

  function onBackKeyDown(e) {
    console.log('back button pressed!');
    showConfirm();
  }

  // process the confirmation dialog result
  function onConfirm(button) {
    if (button == 2) {
      navigator.app.exitApp();
    }
  }

  // Show a custom confirmation dialog
  //
  function showConfirm() {
    navigator.notification.confirm(
      'Are you sure to exit?',  // message
      onConfirm,              // callback to invoke with index of button pressed
      'Alert',            // title
      'Cancel,Exit'          // buttonLabels
    );
  }


  </script>
  <title>Collecting information step 1</title>
</head>
<body onload="onLoad()">

  <!-- Active account page -->
  <!-- <div id="content" style="padding-left: 20px; padding-right: 20px; background-color: #FFFFFF; top: 100px; bottom: 100px;left:0px;right:0px;">

  <!--Page content goes here, fixed elements go above the all elements class-->
  <div class="material-container full-bottom">
    <div class="sidebar-divider" style="padding-left: 0px">
      Tell about your hobby
    </div>
    <div class="container">
      <ul class="tabs">
        <li class="tab-link active-tab" data-tab="tab-1">Movie</li>
        <li class="tab-link" data-tab="tab-2">Music</li>
        <li class="tab-link" data-tab="tab-3">Sport</li>
        <li class="tab-link" data-tab="tab-4">Other</li>
      </ul>

      <div id="tab-1" class="tab-content active-tab-content customize-boxshadow">
        <div class="one-half">
          <input id="movies-check-label-1" name="movies" class="checkbox" value="1" type="checkbox"><label class="checkbox-label" for="movies-check-label-1">Action</label>
          <input id="movies-check-label-2" name="movies" class="checkbox" value="2" type="checkbox"><label class="checkbox-label" for="movies-check-label-2">Short films</label>
          <input id="movies-check-label-3" name="movies" class="checkbox" value="3" type="checkbox"><label class="checkbox-label" for="check-lmovies-abel-3">Epics</label>
          <input id="movies-check-label-4" name="movies" class="checkbox" value="4" type="checkbox"><label class="checkbox-label" for="movies-check-label-4">Classics</label>
          <input id="movies-check-label-5" name="movies" class="checkbox" value="5" type="checkbox"><label class="checkbox-label" for="movies-check-label-5">Romantic</label>
        </div>
        <div class="one-half last-column">
          <input id="movies-check-label-6" name="movies" class="checkbox" value="6" type="checkbox"><label class="checkbox-label" for="movies-check-label-6">Document</label>
          <input id="movies-check-label-7" name="movies" class="checkbox" value="7" type="checkbox"><label class="checkbox-label" for="movies-check-label-7">Comedy</label>
          <input id="movies-check-label-8" name="movies" class="checkbox" value="8" type="checkbox"><label class="checkbox-label" for="movies-check-label-8">Horror</label>
          <input id="movies-check-label-9" name="movies" class="checkbox" value="9" type="checkbox"><label class="checkbox-label" for="movies-check-label-9">Drama</label>
        </div>
      </div>
      <div id="tab-2" class="tab-content customize-boxshadow">
        <div class="one-half">
          <input id="music-check-label-1" name="music" class="checkbox" value="10" type="checkbox"><label class="checkbox-label" for="music-check-label-1">Blues</label>
          <input id="music-check-label-2" name="music" class="checkbox" value="11" type="checkbox"><label class="checkbox-label" for="music-check-label-2">Hip-Hop</label>
          <input id="music-check-label-3" name="music" class="checkbox" value="12" type="checkbox"><label class="checkbox-label" for="music-check-label-3">Rap</label>
          <input id="music-check-label-4" name="music" class="checkbox" value="13" type="checkbox"><label class="checkbox-label" for="music-check-label-4">Devotional</label>
          <input id="music-check-label-5" name="music" class="checkbox" value="14" type="checkbox"><label class="checkbox-label" for="music-check-label-5">House</label>
          <input id="music-check-label-6" name="music" class="checkbox" value="15" type="checkbox"><label class="checkbox-label" for="music-check-label-6">Reggae</label>
          <input id="music-check-label-7" name="music" class="checkbox" value="16" type="checkbox"><label class="checkbox-label" for="music-check-label-7">Disco</label>
        </div>
        <div class="one-half last-column">
          <input id="music-check-label-8" name="music" class="checkbox" value="17" type="checkbox"><label class="checkbox-label" for="music-check-label-8">Sufi</label>
          <input id="music-check-label-9" name="music" class="checkbox" value="18" type="checkbox"><label class="checkbox-label" for="music-check-label-9">Techno</label>
          <input id="music-check-label-10" name="music" class="checkbox" value="19" type="checkbox"><label class="checkbox-label" for="music-check-label-10">Film songs</label>
          <input id="music-check-label-11" name="music" class="checkbox" value="20" type="checkbox"><label class="checkbox-label" for="music-check-label-11">Jazz</label>
          <input id="music-check-label-12" name="music" class="checkbox" value="21" type="checkbox"><label class="checkbox-label" for="music-check-label-12">Pop</label>
          <input id="music-check-label-13" name="music" class="checkbox" value="22" type="checkbox"><label class="checkbox-label" for="music-check-label-13">Rock</label>
          <input id="music-check-label-14" name="music" class="checkbox" value="23" type="checkbox"><label class="checkbox-label" for="music-check-label-14">EDM</label>
        </div>
      </div>
      <div id="tab-3" class="tab-content customize-boxshadow">
        <div class="one-half">
          <input id="sport-check-label-1" name="sport" class="checkbox" value="24" type="checkbox"><label class="checkbox-label" for="sport-check-label-1">Adventure</label>
          <input id="sport-check-label-2" name="sport" class="checkbox" value="25" type="checkbox"><label class="checkbox-label" for="sport-check-label-2">Chess</label>
          <input id="sport-check-label-3" name="sport" class="checkbox" value="26" type="checkbox"><label class="checkbox-label" for="sport-check-label-3">Scrabble</label>
          <input id="sport-check-label-4" name="sport" class="checkbox" value="27" type="checkbox"><label class="checkbox-label" for="sport-check-label-4">Aerobics</label>
          <input id="sport-check-label-5" name="sport" class="checkbox" value="28" type="checkbox"><label class="checkbox-label" for="sport-check-label-5">Cricket</label>
          <input id="sport-check-label-6" name="sport" class="checkbox" value="29" type="checkbox"><label class="checkbox-label" for="sport-check-label-6">Badminton</label>
          <input id="sport-check-label-7" name="sport" class="checkbox" value="30" type="checkbox"><label class="checkbox-label" for="sport-check-label-7">Cycling</label>
          <input id="sport-check-label-8" name="sport" class="checkbox" value="31" type="checkbox"><label class="checkbox-label" for="sport-check-label-8">Swimming</label>
          <input id="sport-check-label-9" name="sport" class="checkbox" value="32" type="checkbox"><label class="checkbox-label" for="sport-check-label-9">Basketball</label>
          <input id="sport-check-label-10" name="sport" class="checkbox" value="33" type="checkbox"><label class="checkbox-label" for="sport-check-label-10">Football</label>
        </div>
        <div class="one-half last-column">
          <input id="sport-check-label-11" name="sport" class="checkbox" value="34" type="checkbox"><label class="checkbox-label" for="sport-check-label-11">Tennis</label>
          <input id="sport-check-label-12" name="sport" class="checkbox" value="35" type="checkbox"><label class="checkbox-label" for="sport-check-label-12">Billiards</label>
          <input id="sport-check-label-13" name="sport" class="checkbox" value="36" type="checkbox"><label class="checkbox-label" for="sport-check-label-13">Golf</label>
          <input id="sport-check-label-14" name="sport" class="checkbox" value="37" type="checkbox"><label class="checkbox-label" for="sport-check-label-14">Bowling</label>
          <input id="sport-check-label-15" name="sport" class="checkbox" value="38" type="checkbox"><label class="checkbox-label" for="sport-check-label-15">Hockey</label>
          <input id="sport-check-label-16" name="sport" class="checkbox" value="39" type="checkbox"><label class="checkbox-label" for="sport-check-label-16">Volleyball</label>
          <input id="sport-check-label-17" name="sport" class="checkbox" value="40" type="checkbox"><label class="checkbox-label" for="sport-check-label-17">Card games</label>
          <input id="sport-check-label-18" name="sport" class="checkbox" value="41" type="checkbox"><label class="checkbox-label" for="sport-check-label-18">Jogging</label>
          <input id="sport-check-label-19" name="sport" class="checkbox" value="42" type="checkbox"><label class="checkbox-label" for="sport-check-label-19">Yoga</label>
          <input id="sport-check-label-20" name="sport" class="checkbox" value="43" type="checkbox"><label class="checkbox-label" for="sport-check-label-20">Carrom</label>
        </div>
      </div>
      <div id="tab-4" class="tab-content customize-boxshadow">
        <div class="one-half">
          <input id="other-check-label-1" name="other" class="checkbox" value="44" type="checkbox"><label class="checkbox-label" for="other-check-label-1">Dancing</label>
          <input id="other-check-label-2" name="other" class="checkbox" value="45" type="checkbox"><label class="checkbox-label" for="other-check-label-2">Painting</label>
          <input id="other-check-label-3" name="other" class="checkbox" value="46" type="checkbox"><label class="checkbox-label" for="other-check-label-3">Fishing</label>
          <input id="other-check-label-4" name="other" class="checkbox" value="47" type="checkbox"><label class="checkbox-label" for="other-check-label-4">Astrology</label>
          <input id="other-check-label-5" name="other" class="checkbox" value="48" type="checkbox"><label class="checkbox-label" for="other-check-label-5">Palmistry</label>
          <input id="other-check-label-6" name="other" class="checkbox" value="49" type="checkbox"><label class="checkbox-label" for="other-check-label-6">Pets</label>
        </div>
        <div class="one-half last-column">
          <input id="other-check-label-7" name="other" class="checkbox" value="50" type="checkbox"><label class="checkbox-label" for="other-check-label-7">Cooking</label>
          <input id="other-check-label-8" name="other" class="checkbox" value="51" type="checkbox"><label class="checkbox-label" for="other-check-label-8">Photography</label>
          <input id="other-check-label-9" name="other" class="checkbox" value="52" type="checkbox"><label class="checkbox-label" for="other-check-label-9">Collectibles</label>
          <input id="other-check-label-10" name="other" class="checkbox" value="53" type="checkbox"><label class="checkbox-label" for="other-check-label-10">Nature</label>
          <input id="other-check-label-11" name="other" class="checkbox" value="54" type="checkbox"><label class="checkbox-label" for="other-check-label-11">Puzzles</label>
          <input id="other-check-label-12" name="other" class="checkbox" value="55" type="checkbox"><label class="checkbox-label" for="other-check-label-12">Crosswords</label>
        </div>
      </div>
    </div>
    <div class="formSubmitButtonErrorsWrap contactFormButton">
      <input type="submit" onclick="nextButtonHandler()" class="buttonWrap button button-green contactSubmitButton" id="btnNext" value="Next"/>
    </div>
  </div>
  <!-- <div id="footer">
  <div class="material-container full-bottom">
  <div class="formSubmitButtonErrorsWrap contactFormButton">
  <input type="submit" onclick="nextButtonHandler()" class="buttonWrap button button-green contactSubmitButton" id="btnNext" value="Next"/>
</div>
</div>
</div> -->

<!-- hobby require -->
<div class="top-notification-2 top-notification bg-red-dark timeout-notification timer-notification" id="hobbyRequire">
  <p>
    Choose any hobby!
  </p>
  <a href="#" class="close-top-notification"><i class="fa fa-times"></i></a>
</div>
<!-- Connection error -->
<div class="top-notification-2 top-notification bg-red-dark timeout-notification timer-notification" id="errorConnection">
  <p>
    Can't connect to server, please check your internet connection!
  </p>
  <a href="#" class="close-top-notification"><i class="fa fa-times"></i></a>
</div>
<!-- Other error -->
<div class="top-notification-2 top-notification bg-red-dark timeout-notification timer-notification" id="otherError">
  <p>
    An error has occurred when save your information. Please try again!
  </p>
  <a href="#" class="close-top-notification"><i class="fa fa-times"></i></a>
</div>
<a href="#" class="back-to-top-badge"><i class="fa fa-caret-up"></i>Back to top</a>
<script>

// handler next button
function nextButtonHandler(){
  disableAll();
  var userName = window.localStorage.getItem("username");
  console.log("next btn click");
  console.log(userName);
  // var data_to_send = $.serialize(info);
  // Check connectionStatus
  if (checkInternetConnection()) {
    var moviesArr = getSelectedMovies();
    var musicArr = getSelectedMusic();
    var sportArr = getSelectedSport();
    var otherArr = getSelectedOther();
    var hobbyArr = new Array();
    hobbyArr = moviesArr.concat(musicArr.concat(sportArr.concat(otherArr)));
    console.log(hobbyArr.length);
    if (hobbyArr.length > 0) {
      saveToServer(hobbyArr);
    }else {
      showMessage("hobbyRequire");
      enableAll();
    }
  }else {
    enableAll();
    showMessage("connectionError");
  }
};

function getSelectedMovies() {
  var selectedMovies = new Array();
  $('[name="movies"]').each( function (){
    if($(this).prop('checked') == true){
      selectedMovies.push($(this).val());
    }
  });
  console.log(selectedMovies);
  return selectedMovies;
}

function getSelectedMusic() {
  var selectedMusic = new Array();
  $('[name="music"]').each( function (){
    if($(this).prop('checked') == true){
      selectedMusic.push($(this).val());
    }
  });
  console.log(selectedMusic);
  return selectedMusic;
}

function getSelectedSport() {
  var selectedSport = new Array();
  $('[name="sport"]').each( function (){
    if($(this).prop('checked') == true){
      selectedSport.push($(this).val());
    }
  });
  console.log(selectedSport);
  return selectedSport;
}

function getSelectedOther() {
  var selectedOther = new Array();
  $('[name="other"]').each( function (){
    if($(this).prop('checked') == true){
      selectedOther.push($(this).val());
    }
  });
  console.log(selectedOther);
  return selectedOther;
}

function saveToServer(hobbyArr) {
  var userName = window.localStorage.getItem("username");
  var dataObj = {};
  dataObj.username = userName;
  dataObj.hobby = hobbyArr;
  console.log(JSON.stringify(dataObj));
  $.ajax({
    type: "POST",
    url:"http://139.59.254.92/saveinfo.php",
    data: {"savestep6" : JSON.stringify(dataObj)},
    crossDomain: true,
    cache: false,
    beforeSend: function(){ console.log('saving...');},
    success: function(data){
      console.log(data);
      // save success
      if (data=="saveSuccess") {
        enableAll();
        window.location.replace("profileStep7.html");
      }else if (data=="saveError") {
        // save error
        enableAll();
        showMessage('otherError');
      }
    }
  });
}

// disable all when processing
function disableAll() {
  $("#btnNext").attr("onclick","return false;");
}
// enable all when process done
function enableAll() {
  $("#btnNext").attr("onclick","nextButtonHandler()");
}

// check connection
function checkInternetConnection() {
  connectionStatus = navigator.onLine ? 'online' : 'offline';
  if (connectionStatus=='online') {
    return true;
  }else if (connectionStatus=='offline') {
    return false;
  }
}

// Show message
function showMessage(messType) {
  switch(messType) {
    case 'hobbyRequire':
    $('top-notification-2, top-notification, bg-red-dark, timeout-notification, timer-notification').slideUp(200);
    $('#hobbyRequire').slideDown(200);
    setTimeout(function(){
      $('#hobbyRequire').slideUp(200);
    }, 4000);
    break;
    case 'connectionError':
    $('top-notification-2, top-notification, bg-red-dark, timeout-notification, timer-notification').slideUp(200);
    $('#errorConnection').slideDown(200);
    setTimeout(function(){
      $('#errorConnection').slideUp(200);
    }, 4000);
    break;
    case 'otherError':
    $('top-notification-2, top-notification, bg-red-dark, timeout-notification, timer-notification').slideUp(200);
    $('#otherError').slideDown(200);
    setTimeout(function(){
      $('#otherError').slideUp(200);
    }, 4000);
    break;
    default:
    return false;
  }
}
</script>

<!-- <script type="text/javascript" src="controller/loginController.js"></script> -->
<!-- Cordova reference -->
<script type="text/javascript" src="cordova.js"></script>
<!-- <script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
app.initialize();
</script>  -->
</body>
</html>
